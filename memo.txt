このアプリ（理系チャンネル 問題解説ビューアー）の管理・運用マニュアルを作成しました。
**「複数台のPCで管理する」**という点を重視し、作業の競合を防ぐためのGit運用フローと、公開のためのFirebaseコマンドを中心にまとめています。

---

# 理系チャンネル 問題解説アプリ 管理マニュアル

このマニュアルは、アプリのデータ更新、ソースコード管理、および本番環境への公開手順をまとめたものです。
管理者は**ローカル環境（自分のPC）**でデータを編集し、**Git**で変更履歴を共有し、**Firebase**を通じてWeb上に公開します。

## 1. 初回セットアップ（新しいPCで作業を始める場合）

まだ作業環境が整っていないPCで、最初に1回だけ行う作業です。

### 必要なツールのインストール

1. **Git**: ソースコード管理ツール
2. **Node.js**: Firebaseツールを動かすために必要
3. **VS Code (推奨)**: コードエディタ

### リポジトリの取得とFirebase設定

ターミナル（PowerShellやコマンドプロンプト、VS Codeのターミナル）で以下を実行します。

```bash
# 1. Firebase CLIツールのインストール（未インストールの場合）
npm install -g firebase-tools

# 2. Firebaseへのログイン（ブラウザが開くのでGoogleアカウントでログイン）
firebase login

# 3. リポジトリのクローン（GitHub等のリモートからソースをダウンロード）
git clone <リポジトリのURL>

# 4. ディレクトリへ移動
cd rikeich_q

# 5. Firebaseプロジェクトの紐付けを確認
firebase use default

```

---

## 2. 日々の更新フロー（複数PC運用）

**重要: 複数人で作業する場合、作業開始前に必ず「最新の状態を取得」してください。**

### 手順①：作業開始（最新化）

前回の作業や、別のPCでの作業内容を取り込みます。

```bash
git pull origin main

```

### 手順②：コンテンツの編集・確認

ローカルサーバーを立ち上げて、動作確認やAdmin機能を利用します。
※ `admin.html` などはセキュリティ制限（CORS）のため、ファイルを直接開くだけでは動かない場合があります。Firebaseのエミュレータを使うのが確実です。

```bash
# ローカルサーバーの起動
firebase emulators:start

```

* 表示されるURL（例: `http://localhost:5000`）にアクセスして確認します。
* `http://localhost:5000/admin.html` にアクセスしてデータ編集を行います。
* 編集後、ブラウザ上の保存ボタンを押すと**PC内のファイルが書き換わります**。

### 手順③：変更の保存（Git Commit）

作業が終わったら、変更内容を保存（コミット）します。

```bash
# 1. 変更されたファイルを確認
git status

# 2. すべての変更をステージング（登録）
git add .

# 3. コミット（変更内容のメッセージを付けて保存）
git commit -m "修正"

```

### 手順④：共有（Git Push）

コミットした内容をクラウド（GitHub等）にアップロードします。これをしないと他のPCに反映されません。

```bash
git push origin main

```

---

## 3. 本番公開（デプロイ）

ローカルでの確認が完了し、GitへのPushも済んだら、Web上の本番環境を更新します。

```bash
# 本番環境へデプロイ
firebase deploy

```

* 成功すると `Deploy complete!` と表示され、Hosting URLで公開されたサイトを確認できます。

---

## 4. トラブルシューティング

### Q. `git push` しようとしたらエラーが出た

```text
hint: Updates were rejected because the remote contains work that you do not have locally.

```

**原因:** 別のPCで先に更新が行われています。
**対応:**

1. `git pull origin main` を実行して、他PCの変更を取り込みます。
2. （自動でマージされればOK。競合が発生した場合はファイルを修正します）
3. 再度 `git push origin main` を行います。

### Q. 管理画面（admin.html）でファイルが保存できない

**原因:** ブラウザの「File System Access API」の権限許可が切れている可能性があります。
**対応:** ブラウザのアドレスバー付近にある許可設定を確認し、ローカルファイルへの書き込み権限を再度許可してください。

---

## コマンドチートシート

| 目的 | コマンド | 実行タイミング |
| --- | --- | --- |
| **作業開始** | `git pull origin main` | **毎回最初**に実行 |
| **確認・編集** | `firebase emulators:start` | 編集・動作確認時 |
| **変更確定** | `git add .` <br>

<br> `git commit -m "メモ"` | 作業区切りごと |
| **共有** | `git push origin main` | 作業終了時 |
| **本番公開** | `firebase deploy` | Web公開したい時 |