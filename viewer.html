<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
  <title>Physics Viewer</title>
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/viewer.css" />
  <!-- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨CSSãƒ»JSã¯è§£èª¬ã« sim-embed ãŒã‚ã‚‹ã¨ãã®ã¿é…å»¶èª­ã¿è¾¼ã¿ -->

  <script>
    // MathJaxã®è¨­å®šã¯é…å»¶èª­ã¿è¾¼ã¿æ™‚ã«è¨­å®š
    window.MathJaxConfig = {
      tex: {
        inlineMath: [
          ["$", "$"],
          ["\\(", "\\)"],
        ],
        displayMath: [
          ["$$", "$$"],
          ["\\[", "\\]"],
        ],
        macros: {
          strong: ["\\textcolor{#3b82f6}{\\boldsymbol{#1}}", 1],
        },
      },
      svg: {
        fontCache: "global",
      },
    };
    
    // MathJaxã®é…å»¶èª­ã¿è¾¼ã¿
    window.loadMathJax = function() {
      if (window.MathJax) return;
      window.MathJax = window.MathJaxConfig;
      var script = document.createElement('script');
      script.id = 'MathJax-script';
      script.async = true;
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.onload = function() {
        if (window.onMathJaxLoaded) window.onMathJaxLoaded();
      };
      document.head.appendChild(script);
    };
    
    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã¾ãŸã¯ä¸€å®šæ™‚é–“å¾Œã«MathJaxã‚’èª­ã¿è¾¼ã¿
    var mathJaxLoaded = false;
    function tryLoadMathJax() {
      if (mathJaxLoaded) return;
      mathJaxLoaded = true;
      setTimeout(window.loadMathJax, 500);
    }
    
    window.addEventListener('scroll', tryLoadMathJax, { once: true, passive: true });
    setTimeout(tryLoadMathJax, 1000); // èª­ã¿è¾¼ã¿ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ—©ã‚ã‚‹
  </script>
</head>

<body>
  <a href="#main-content" class="skip-link">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã‚¹ã‚­ãƒƒãƒ—</a>
  <header class="prob-header-top" role="banner">
    <div class="header-top-row">
      <div class="header-left">
        <a href="index.html" class="btn-back-circle" aria-label="ä¸€è¦§ã«æˆ»ã‚‹">â†</a>
        <h1 id="prob-title-header">èª­ã¿è¾¼ã¿ä¸­...</h1>
      </div>
      <div class="header-actions" role="group" aria-label="æ“ä½œ">
        <button type="button" id="qr-trigger" class="btn-sm qr-trigger" aria-label="ã“ã®ãƒšãƒ¼ã‚¸ã®QRã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º" title="QRã‚³ãƒ¼ãƒ‰ã§ã‚¢ã‚¯ã‚»ã‚¹">â–£ QR</button>
        <button type="button" id="btn-bookmark" class="btn-sm btn-bookmark" aria-label="ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " title="ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">â˜† ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯</button>
        <button type="button" id="btn-toggle-pointer" class="btn-sm" aria-label="æ“ä½œãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">ğŸ‘† æ“ä½œãƒ¢ãƒ¼ãƒ‰</button>
        <!-- éŸ³å£°æ©Ÿèƒ½ã¯ä¸€æ™‚çš„ã«éè¡¨ç¤º -->
        <!-- <button id="audio-generate-btn" class="btn-sm" style="display: none;" title="è£œè¶³èª¬æ˜ä»˜ãã§éŸ³å£°è§£èª¬ã‚’å†ç”Ÿ">ğŸ¤ éŸ³å£°è§£èª¬</button> -->
      </div>
    </div>
    <!-- ã‚¿ãƒ–ãƒãƒ¼ã¯ã“ã“ã«å‹•çš„ã«æŒ¿å…¥ã•ã‚Œã‚‹ -->
  </header>

  <div class="viewer-container" id="main-content">
    <div class="viewer-split-content">
      <div id="sim-target" class="simulation-area" aria-label="ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é ˜åŸŸ"></div>

      <div id="text-target" class="explanation-area" role="article" aria-label="è§£èª¬"></div>
      <canvas id="pointer-canvas" class="pointer-canvas-inline" aria-hidden="true"></canvas>
    </div>
    <aside class="ad-slot ad-slot--sidebar" aria-label="åºƒå‘Š"></aside>
  </div>

  <!-- QRã‚³ãƒ¼ãƒ‰æ‹¡å¤§è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="qr-modal" class="qr-modal" role="dialog" aria-modal="true" aria-label="QRã‚³ãƒ¼ãƒ‰" aria-hidden="true">
    <div class="qr-modal-backdrop"></div>
    <div class="qr-modal-content">
      <button type="button" class="qr-modal-close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
      <p class="qr-modal-title">ã“ã®ãƒšãƒ¼ã‚¸ã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹QRã‚³ãƒ¼ãƒ‰</p>
      <div id="qr-modal-canvas-wrap" class="qr-modal-canvas-wrap"></div>
      <p class="qr-modal-url" id="qr-modal-url"></p>
    </div>
  </div>

  <!-- æ“ä½œãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ•ãƒ­ãƒ¼ãƒˆï¼šçµ‚äº†ãƒœã‚¿ãƒ³ã®ã¿ -->
  <div id="recording-float-bar" class="recording-float-bar" aria-hidden="true">
    <button type="button" id="recording-btn-exit" class="recording-float-btn recording-float-btn-exit" title="æ“ä½œãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†" aria-label="æ“ä½œãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†">çµ‚äº†</button>
  </div>

  <!-- éŸ³å£°ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«ï¼ˆä¸€æ™‚çš„ã«éè¡¨ç¤ºï¼‰ -->
  <!--
  <div id="audio-controls-panel" class="audio-controls-panel" style="display: none;">
    <div class="audio-controls-header">
      <span>ğŸ¤ éŸ³å£°è§£èª¬</span>
      <button id="audio-close-btn" class="audio-close-btn">âœ•</button>
    </div>
    <div class="audio-controls-body">
      <div class="audio-progress-container">
        <div id="audio-progress" class="audio-progress"></div>
      </div>
      <div class="audio-buttons">
        <button id="audio-play-btn" class="audio-btn">â–¶ï¸ å†ç”Ÿ</button>
        <button id="audio-pause-btn" class="audio-btn" style="display: none;">â¸ï¸ ä¸€æ™‚åœæ­¢</button>
        <button id="audio-stop-btn" class="audio-btn">â¹ï¸ åœæ­¢</button>
      </div>
      <div id="audio-error" class="audio-error" style="display: none;"></div>
    </div>
  </div>
  -->

  <footer class="site-footer">
    <div class="site-footer-inner">
      <a href="about.html">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
      <span class="site-footer-sep">|</span>
      <a href="privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
      <span class="site-footer-sep">|</span>
      <a href="index.html">Physics Lab.</a>
    </div>
  </footer>

  <script src="js/error-handler.js" defer></script>
  <script src="js/pointer.js" defer></script>
  <script src="js/text-extractor.js" defer></script>
  <script src="js/audio-enhancer.js" defer></script>
  <script src="js/audio-player.js" defer></script>
  <script src="js/mobile-touch.js" defer></script>
  <script src="js/viewer.js" defer></script>
  <script src="config/firebase-config.js" defer></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").catch(function () {});
    }
    // Firebase ã¯ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³é€ä¿¡æ™‚ã«é…å»¶åˆæœŸåŒ–ï¼ˆviewer.jsï¼‰
  </script>
</body>

</html>